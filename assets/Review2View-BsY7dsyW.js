import{r as a,f as x,c as v,a as e,e as i,d as w,v as r,t as u,F as f,o as k}from"./index-3O2NX-vD.js";import{a as y}from"./index-NIGUFBhG.js";const T={key:0},$={key:1},g="https://todolist-api.hexschool.io/",C={__name:"Review2View",setup(c){const t=a({email:"",password:"",nickname:""}),b=async()=>{try{const o=await y.post(`${g}users/sign_up`,t.value);console.log(o),d.value="註冊成功,uid="+o.data.uid}catch(o){console.error("註冊失敗:",o),d.value="註冊失敗"}},d=a(""),s=a({email:"",password:""}),m=a(""),U=async()=>{try{const o=await y.post(`${g}users/sign_in`,s.value);console.log(o),m.value="登入成功,token="+o.data.token,document.cookie=`customTodoToken=${o.data.token};path=/`}catch(o){console.error("登入失敗:",o),m.value="登入失敗"}},p=a({nickname:"",uid:""});x(async()=>{const o=document.cookie.replace(/(?:(?:^|.*;\s*)customTodoToken\s*=\s*([^;]*).*$)/i,"$1");console.log(o);const l=await y.get(`${g}users/checkout`,{headers:{Authorization:o}});console.log(l),p.value=l.data});const V=async()=>{};return(o,l)=>(k(),v(f,null,[l[5]||(l[5]=e("h1",null,"註冊功能",-1)),i(e("input",{type:"email",placeholder:"請輸入Email","onUpdate:modelValue":l[0]||(l[0]=n=>t.value.email=n)},null,512),[[r,t.value.email]]),i(e("input",{type:"password",placeholder:"請輸入密碼","onUpdate:modelValue":l[1]||(l[1]=n=>t.value.password=n)},null,512),[[r,t.value.password]]),i(e("input",{type:"text",placeholder:"請輸入暱稱","onUpdate:modelValue":l[2]||(l[2]=n=>t.value.nickname=n)},null,512),[[r,t.value.nickname]]),e("button",{type:"button",onClick:b},"註冊"),l[6]||(l[6]=e("br",null,null,-1)),w(" "+u(t.value),1),l[7]||(l[7]=e("br",null,null,-1)),l[8]||(l[8]=e("br",null,null,-1)),e("b",null,"註冊結果: "+u(d.value),1),l[9]||(l[9]=e("h1",null,"登入功能",-1)),i(e("input",{type:"email",name:"email",placeholder:"請輸入Email","onUpdate:modelValue":l[3]||(l[3]=n=>s.value.email=n)},null,512),[[r,s.value.email]]),i(e("input",{type:"password",name:"password",placeholder:"請輸入密碼","onUpdate:modelValue":l[4]||(l[4]=n=>s.value.password=n)},null,512),[[r,s.value.password]]),e("button",{type:"button",onClick:U},"登入"),l[10]||(l[10]=e("br",null,null,-1)),w(" "+u(s.value),1),l[11]||(l[11]=e("br",null,null,-1)),l[12]||(l[12]=e("br",null,null,-1)),e("b",null,"登入結果: "+u(m.value),1),l[13]||(l[13]=e("h1",null,"驗證功能",-1)),p.value.uid?(k(),v("div",T,[e("p",null,"Uid:"+u(p.value.uid),1),e("p",null,"暱稱:"+u(p.value.nickname),1)])):(k(),v("div",$,"你還沒登入!")),l[14]||(l[14]=e("h1",null,"登出功能",-1)),e("button",{type:"button",onClick:V},"登出")],64))}};export{C as default};
